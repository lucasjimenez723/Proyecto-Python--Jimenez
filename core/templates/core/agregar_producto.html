{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Agregar producto</title>

    <!-- CSS -->
    <link rel="stylesheet" href="{% static 'core/css/style.css' %}">
</head>
<body>

<div class="container">

    <h1>Pedido #{{ pedido.id }}</h1>
    <p><strong>Cliente:</strong> {{ pedido.cliente }}</p>

    <hr>

    <h2>Agregar producto</h2>

    <form method="post">
        {% csrf_token %}

        <label>Producto</label>
        <select name="producto" required>
            {% for producto in productos %}
                <option value="{{ producto.id }}">
                    {{ producto.nombre }} - ${{ producto.precio }}
                </option>
            {% endfor %}
        </select>

        <label>Cantidad</label>
        <input type="number" name="cantidad" min="1" required>

        <button type="submit">Agregar</button>
    </form>

    <hr>

    <h2>Detalle del pedido</h2>

    <table>
        <thead>
            <tr>
                <th>Producto</th>
                <th>Cantidad</th>
                <th>Precio</th>
                <th>Subtotal</th>
            </tr>
        </thead>
        <tbody>
            {% for d in detalles %}
            <tr>
                <td>{{ d.producto.nombre }}</td>
                <td>{{ d.cantidad }}</td>
                <td>${{ d.producto.precio }}</td>
                <td>${{ d.subtotal }}</td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="4">No hay productos agregados</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <h3 class="total">
        Total del pedido: ${{ pedido.total }}
    </h3>

    <a href="{% url 'home' %}" class="btn-volver">Volver al inicio</a>

</div>

</body>
</html>
